<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кулинарная книга</title>
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
</head>
<body>
    <header>
        <a href="/" class="logo"><img src="/img/logo.png" /></a>
        <nav>
            <a href="#">О проекте </a>
            <a href="#">Рецепты</a>
            <a href="/addrecept.html" class="button">Отправить рецепт</a>
        </nav>
    </header>
    <section>
        <h2>Отправить рецепт</h2>
        <form method="POST" id="formx" action="javascript:void(null);" onsubmit="call()">
            <p>
                <label for="name">Имя:</label>
                <input type="text" name="name" placeholder="Введите ваше имя" required />
            </p>
            <p>
                <label for="email">Email (формат: test@yandex.ru):</label>
                <input type="text" name="email" placeholder="Введите электронный адрес" required pattern="^\w+@\w+.+[a-z]$" />
            </p>
            <p>
                <label for="tel">Телефон (формат: xxxxxxxxxx): </label>
                <input type="tel" name="tel" placeholder="Введите номер телефона" pattern="^\d{10}$" required />
            </p>
            <p>
                <label for="title_recept">Название рецепта:</label>
                <input type="text" name="title_recept" placeholder="Введите название" required />
            </p>
            <p>
                <label for="message">Описание рецепта:</label>
                <textarea name="message" cols="40" rows="6" required></textarea>
            </p>
            <p>
                <button class="submit" type="submit">Отправить</button>
            </p>
        </form>
    </section>
    <footer>
        <p>&copy; 2017 - GolTROFF production</p>
    </footer>
    <script type="text/javascript" language="javascript">
        function call() {
            var msg =  $('#formx').serialize();
            $.ajax({
                type: 'POST',
                url: 'posthandler.axd',
                data: msg,
                success: function (data) {
                    alert('Рецепт успешно отправлен!');
                    $("#formx")[0].reset();
                },
                error: function () {
                    alert('Возникла ошибка! Не верны формат, поправте данные и попробуйте снова.');
                }
            });

        }
    </script>
</body>
</html>
